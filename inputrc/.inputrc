# --- General Behavior ---
set bell-style visible
set editing-mode emacs
set keymap emacs
set mark-symlinked-directories on

# --- Character & Display (International Support) ---
set meta-flag on
set input-meta on
set convert-meta off
set output-meta on

# --- Completion Settings ---
set show-all-if-ambiguous on
set completion-ignore-case on

# --- Keybindings ---
$if mode=emacs

    # Prefix history search (Up/Down)
    "\e[A": history-search-backward
    "\e[B": history-search-forward

    # Standard Linux/Xterm (Home, End, Del, PgUp, PgDn)
    "\e[1~": beginning-of-line
    "\e[4~": end-of-line
    "\e[3~": delete-char
    "\e[5~": beginning-of-history
    "\e[6~": end-of-history

    # macOS / iTerm2 Specifics
    # This fixes Home/End and Ctrl+Arrows for Apple Terminal users
    "\e[H": beginning-of-line
    "\e[F": end-of-line
    "\e[1;5C": forward-word
    "\e[1;5D": backward-word

    # Linux Console Word Movement
    "\e[5C": forward-word
    "\e[5D": backward-word

$endif
